{"ast":null,"code":"class API {\n  constructor(key_id, secret_key, url) {\n    this.key_id = key_id;\n    this.secret_key = secret_key;\n    this.url = url;\n  }\n\n  account(callback) {\n    let xhr = new XMLHttpRequest();\n    xhr.addEventListener('load', () => callback(xhr.responseText));\n    xhr.open('GET', `${this.url}/v2/account`);\n    xhr.setRequestHeader(\"APCA-API-KEY-ID\", this.key_id);\n    xhr.setRequestHeader(\"APCA-API-SECRET-KEY\", this.secret_key);\n    xhr.send();\n  }\n\n  get(callback) {\n    let xhr = new XMLHttpRequest();\n    xhr.addEventListener('load', () => callback(xhr.responseText));\n    xhr.open('GET', `${this.state.paperURL}/v2/orders`);\n    xhr.setRequestHeader(\"APCA-API-KEY-ID\", this.key_id);\n    xhr.setRequestHeader(\"APCA-API-SECRET-KEY\", this.secret_key);\n    xhr.send();\n  }\n\n  buy() {\n    let xhr = new XMLHttpRequest();\n    xhr.addEventListener('load', () => {\n      // update the state of the component with the result here\n      console.log(xhr.responseText);\n      this.setState({\n        outputText: \"Submitted Order\"\n      });\n      this.setState({\n        responseText: xhr.responseText\n      });\n    });\n    xhr.open('POST', `${this.state.paperURL}/v2/orders`);\n    xhr.setRequestHeader(\"APCA-API-KEY-ID\", this.props.key_id);\n    xhr.setRequestHeader(\"APCA-API-SECRET-KEY\", this.props.secret_key); //Example of JSON order\n    //https://alpaca.markets/docs/trading-on-alpaca/orders/\n    //List of required parameters\n    //https://alpaca.markets/docs/api-documentation/api-v2/orders/\n\n    let order = {\n      \"side\": \"buy\",\n      \"symbol\": \"TSLA\",\n      \"qty\": \"1\",\n      \"type\": \"market\",\n      \"time_in_force\": \"gtc\"\n    };\n    xhr.send(JSON.stringify(order));\n  } //#region TODO\n\n  /*\n    sell(){\n      this.setState({outputText: \"Sell Submitted\"})\n    }\n  \n    cancel(){\n  \n      //This Cancels all orders\n  \n      this.setState({outputText: \"Cancelled\"})\n  \n      let xhr = new XMLHttpRequest()\n  \n      xhr.addEventListener('load', () => {\n        // update the state of the component with the result here\n      })\n  \n      xhr.open('DELETE', `${this.state.paperURL}/v2/orders`)\n  \n      xhr.setRequestHeader(\"APCA-API-KEY-ID\", this.props.key_id)\n      xhr.setRequestHeader(\"APCA-API-SECRET-KEY\", this.props.secret_key)\n  \n      xhr.send()\n    }*/\n  //#endregion\n\n\n}\n\nexport default API;","map":{"version":3,"sources":["/home/ruitai/alpaca/frontend/src/Components/apiHandler.js"],"names":["API","constructor","key_id","secret_key","url","account","callback","xhr","XMLHttpRequest","addEventListener","responseText","open","setRequestHeader","send","get","state","paperURL","buy","console","log","setState","outputText","props","order","JSON","stringify"],"mappings":"AAAA,MAAMA,GAAN,CAAU;AACRC,EAAAA,WAAW,CAACC,MAAD,EAASC,UAAT,EAAqBC,GAArB,EAA0B;AACnC,SAAKF,MAAL,GAAcA,MAAd;AACA,SAAKC,UAAL,GAAkBA,UAAlB;AACA,SAAKC,GAAL,GAAWA,GAAX;AACD;;AAEDC,EAAAA,OAAO,CAACC,QAAD,EAAU;AACf,QAAIC,GAAG,GAAG,IAAIC,cAAJ,EAAV;AACAD,IAAAA,GAAG,CAACE,gBAAJ,CAAqB,MAArB,EAA6B,MAAIH,QAAQ,CAACC,GAAG,CAACG,YAAL,CAAzC;AACAH,IAAAA,GAAG,CAACI,IAAJ,CAAS,KAAT,EAAiB,GAAE,KAAKP,GAAI,aAA5B;AACAG,IAAAA,GAAG,CAACK,gBAAJ,CAAqB,iBAArB,EAAwC,KAAKV,MAA7C;AACAK,IAAAA,GAAG,CAACK,gBAAJ,CAAqB,qBAArB,EAA4C,KAAKT,UAAjD;AACAI,IAAAA,GAAG,CAACM,IAAJ;AACH;;AAECC,EAAAA,GAAG,CAACR,QAAD,EAAU;AACT,QAAIC,GAAG,GAAG,IAAIC,cAAJ,EAAV;AACAD,IAAAA,GAAG,CAACE,gBAAJ,CAAqB,MAArB,EAA6B,MAAIH,QAAQ,CAACC,GAAG,CAACG,YAAL,CAAzC;AACAH,IAAAA,GAAG,CAACI,IAAJ,CAAS,KAAT,EAAiB,GAAE,KAAKI,KAAL,CAAWC,QAAS,YAAvC;AACAT,IAAAA,GAAG,CAACK,gBAAJ,CAAqB,iBAArB,EAAwC,KAAKV,MAA7C;AACAK,IAAAA,GAAG,CAACK,gBAAJ,CAAqB,qBAArB,EAA4C,KAAKT,UAAjD;AACAI,IAAAA,GAAG,CAACM,IAAJ;AAEH;;AAEDI,EAAAA,GAAG,GAAE;AACH,QAAIV,GAAG,GAAG,IAAIC,cAAJ,EAAV;AAEAD,IAAAA,GAAG,CAACE,gBAAJ,CAAqB,MAArB,EAA6B,MAAM;AACjC;AACAS,MAAAA,OAAO,CAACC,GAAR,CAAYZ,GAAG,CAACG,YAAhB;AACA,WAAKU,QAAL,CAAc;AAACC,QAAAA,UAAU,EAAE;AAAb,OAAd;AACA,WAAKD,QAAL,CAAc;AAACV,QAAAA,YAAY,EAAEH,GAAG,CAACG;AAAnB,OAAd;AACD,KALD;AAOAH,IAAAA,GAAG,CAACI,IAAJ,CAAS,MAAT,EAAkB,GAAE,KAAKI,KAAL,CAAWC,QAAS,YAAxC;AAEAT,IAAAA,GAAG,CAACK,gBAAJ,CAAqB,iBAArB,EAAwC,KAAKU,KAAL,CAAWpB,MAAnD;AACAK,IAAAA,GAAG,CAACK,gBAAJ,CAAqB,qBAArB,EAA4C,KAAKU,KAAL,CAAWnB,UAAvD,EAbG,CAeH;AACA;AAEA;AACA;;AAEA,QAAIoB,KAAK,GAAG;AACV,cAAS,KADC;AAEV,gBAAU,MAFA;AAGV,aAAQ,GAHE;AAIV,cAAQ,QAJE;AAKV,uBAAiB;AALP,KAAZ;AAQAhB,IAAAA,GAAG,CAACM,IAAJ,CAASW,IAAI,CAACC,SAAL,CAAeF,KAAf,CAAT;AACH,GAxDS,CA0DV;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACE;;;AAnFQ;;AAuFV,eAAevB,GAAf","sourcesContent":["class API {\n  constructor(key_id, secret_key, url) {\n    this.key_id = key_id\n    this.secret_key = secret_key\n    this.url = url\n  }\n\n  account(callback){\n    let xhr = new XMLHttpRequest()\n    xhr.addEventListener('load', ()=>callback(xhr.responseText))\n    xhr.open('GET', `${this.url}/v2/account`)\n    xhr.setRequestHeader(\"APCA-API-KEY-ID\", this.key_id)\n    xhr.setRequestHeader(\"APCA-API-SECRET-KEY\", this.secret_key)\n    xhr.send()\n}\n\n  get(callback){\n      let xhr = new XMLHttpRequest()\n      xhr.addEventListener('load', ()=>callback(xhr.responseText))\n      xhr.open('GET', `${this.state.paperURL}/v2/orders`)\n      xhr.setRequestHeader(\"APCA-API-KEY-ID\", this.key_id)\n      xhr.setRequestHeader(\"APCA-API-SECRET-KEY\", this.secret_key)\n      xhr.send()\n\n  }\n\n  buy(){      \n    let xhr = new XMLHttpRequest()\n\n    xhr.addEventListener('load', () => {\n      // update the state of the component with the result here\n      console.log(xhr.responseText)\n      this.setState({outputText: \"Submitted Order\"})\n      this.setState({responseText: xhr.responseText})\n    })\n\n    xhr.open('POST', `${this.state.paperURL}/v2/orders`)\n\n    xhr.setRequestHeader(\"APCA-API-KEY-ID\", this.props.key_id)\n    xhr.setRequestHeader(\"APCA-API-SECRET-KEY\", this.props.secret_key)\n\n    //Example of JSON order\n    //https://alpaca.markets/docs/trading-on-alpaca/orders/\n\n    //List of required parameters\n    //https://alpaca.markets/docs/api-documentation/api-v2/orders/\n\n    let order = {\n      \"side\" : \"buy\",\n      \"symbol\": \"TSLA\",\n      \"qty\" : \"1\",\n      \"type\": \"market\",\n      \"time_in_force\": \"gtc\"\n    }\n\n    xhr.send(JSON.stringify(order))\n}\n\n//#region TODO\n/*\n  sell(){\n    this.setState({outputText: \"Sell Submitted\"})\n  }\n\n  cancel(){\n\n    //This Cancels all orders\n\n    this.setState({outputText: \"Cancelled\"})\n\n    let xhr = new XMLHttpRequest()\n\n    xhr.addEventListener('load', () => {\n      // update the state of the component with the result here\n    })\n\n    xhr.open('DELETE', `${this.state.paperURL}/v2/orders`)\n\n    xhr.setRequestHeader(\"APCA-API-KEY-ID\", this.props.key_id)\n    xhr.setRequestHeader(\"APCA-API-SECRET-KEY\", this.props.secret_key)\n\n    xhr.send()\n  }*/\n  //#endregion\n\n}\n\nexport default API;"]},"metadata":{},"sourceType":"module"}