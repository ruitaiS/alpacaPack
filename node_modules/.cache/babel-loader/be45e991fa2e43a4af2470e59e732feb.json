{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/ruitai/alpaca/frontend/src/Components/main.js\";\nimport { Component } from \"react\";\nimport Control from './control';\nimport API from './apiHandler';\nimport Stream from \"./stream\";\n\nclass Main extends Component {\n  constructor(props) {\n    super(props); //Values that get passed to the component\n\n    this.tickerChange = this.tickerChange.bind(this);\n    this.idChange = this.idChange.bind(this);\n    this.skChange = this.skChange.bind(this);\n    this.streamListener = this.streamListener.bind(this);\n    this.log = this.log.bind(this); //this.test = this.test.bind(this);\n\n    this.state = {\n      key_id: 'PKHGR6CVRK7DTWFIB6Q1',\n      secret_key: 'TpSauKJD8We5hu3vvXzwp2o7UrXBfR4uzxp4Z27n',\n      ticker: 'TSLA'\n    };\n    this.api = new API(this.state.key_id, this.state.secret_key, 'https://paper-api.alpaca.markets'); //TODO: Stream will be a little more complex wrt getting the return data\n\n    this.ws = new Stream(this.state.key_id, this.streamListener); //this.ws.subscribe(this.state.ticker)\n  } //#region Onchange Functions (Called from Control Panel)\n  //TODO: May need to update the websocket stream & also the api handler\n  //NOTE: Using this.state.[whatever] after setState doesn't seem to update it until the next iteration;\n  //Need to directly use e.target.value\n\n\n  tickerChange(e) {\n    this.ws.unsubscribe(this.state.ticker);\n    this.setState({\n      ticker: e.target.value\n    });\n    this.ws.subscribe(e.target.value);\n  }\n\n  idChange(e) {\n    this.setState({\n      key_id: e.target.value\n    });\n    this.api.idChange(e.target.value);\n    this.ws = new Stream(e.target.value, this.streamListener);\n  }\n\n  skChange(e) {\n    this.setState({\n      secret_key: e.target.value\n    });\n    this.api.skChange(e.target.value);\n  } //#endregion\n\n\n  log(msg) {\n    console.log(msg);\n  }\n\n  streamListener(msg) {\n    console.log(msg);\n    /*TODO\n    See old version of stream\n    Lots of entangled logic that you'll need to parcel out\n    Here specifically you'll just want to update the price\n    Updating chart and percent bar logic should be seperate\n    */\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [this.state.key_id, /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => this.api.account(this.log),\n        children: \" Clicky\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Control, {\n        key_id: this.state.key_id,\n        secret_key: this.state.secret_key,\n        ticker: this.state.ticker,\n        idChange: this.idChange,\n        skChange: this.skChange,\n        tickerChange: this.tickerChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Main;","map":{"version":3,"sources":["/home/ruitai/alpaca/frontend/src/Components/main.js"],"names":["Component","Control","API","Stream","Main","constructor","props","tickerChange","bind","idChange","skChange","streamListener","log","state","key_id","secret_key","ticker","api","ws","e","unsubscribe","setState","target","value","subscribe","msg","console","render","account"],"mappings":"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","sourcesContent":["import {Component} from \"react\";\nimport Control from './control';\nimport API from './apiHandler';\nimport Stream from \"./stream\";\n\nclass Main extends Component{\n    constructor(props){\n        super(props);\n        //Values that get passed to the component\n\n        this.tickerChange = this.tickerChange.bind(this);\n        this.idChange = this.idChange.bind(this);\n        this.skChange = this.skChange.bind(this);\n\n        this.streamListener = this.streamListener.bind(this);\n\n        this.log = this.log.bind(this);\n        //this.test = this.test.bind(this);\n        this.state = {\n            key_id: 'PKHGR6CVRK7DTWFIB6Q1',\n            secret_key: 'TpSauKJD8We5hu3vvXzwp2o7UrXBfR4uzxp4Z27n',\n            ticker: 'TSLA',\n        }\n\n        this.api = new API(this.state.key_id, this.state.secret_key, 'https://paper-api.alpaca.markets')\n\n        //TODO: Stream will be a little more complex wrt getting the return data\n        this.ws = new Stream(this.state.key_id, this.streamListener)\n        //this.ws.subscribe(this.state.ticker)\n    }\n\n    //#region Onchange Functions (Called from Control Panel)\n    //TODO: May need to update the websocket stream & also the api handler\n    //NOTE: Using this.state.[whatever] after setState doesn't seem to update it until the next iteration;\n    //Need to directly use e.target.value\n    tickerChange(e) {\n        this.ws.unsubscribe(this.state.ticker)\n        this.setState({ticker: e.target.value});\n        this.ws.subscribe(e.target.value)\n    }\n    idChange(e) {\n        this.setState({key_id: e.target.value});\n        this.api.idChange(e.target.value)\n        this.ws = new Stream(e.target.value, this.streamListener)\n    }\n    skChange(e) {\n        this.setState({secret_key: e.target.value});\n        this.api.skChange(e.target.value)\n    }\n    //#endregion\n\n    log(msg){\n        console.log(msg)\n    }\n\n    streamListener(msg){\n        console.log(msg)\n        /*TODO\n        See old version of stream\n        Lots of entangled logic that you'll need to parcel out\n        Here specifically you'll just want to update the price\n        Updating chart and percent bar logic should be seperate\n        */\n    }\n\n\n    render(){\n        return(\n            <div>\n                {this.state.key_id}\n                <button onClick={() => this.api.account(this.log)}> Clicky</button>\n                <Control key_id={this.state.key_id} secret_key={this.state.secret_key} ticker={this.state.ticker} idChange={this.idChange} skChange={this.skChange} tickerChange={this.tickerChange}/>\n            </div>\n        )\n    }\n}\n\nexport default Main;"]},"metadata":{},"sourceType":"module"}