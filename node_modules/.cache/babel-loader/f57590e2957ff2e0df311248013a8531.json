{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/ruitai/alpaca/frontend/src/Components/positionBox.js\";\nimport { Component } from \"react\";\nimport PCTBar from '../Components/pctBar';\n\nclass PositionBox extends Component {\n  constructor(props) {\n    super(props); //symbol\n    //qty\n    //cost (purchase cost)\n    //price (current price)\n    //api (alpaca trade api)\n    //updatePositions()\n    //Functions that need to get bound to this instance\n\n    this.enter = this.enter.bind(this);\n    this.exit = this.exit.bind(this);\n    this.state = {\n      lastQty: null //Stores the previous sell quantity so you can re-buy the same amount\n\n    };\n  }\n\n  orderCallback(msg) {\n    console.log(msg);\n    this.props.updatePositions();\n  } //Exit the position at the specified price level\n\n\n  exit(price) {\n    //Do We really need the callback here?\n    this.props.api.sell(msg => this.props.updatePositions(), this.props.symbol, this.props.qty, \"limit\", price, \"gtc\");\n    this.setState({\n      lastQty: this.props.qty\n    });\n  } //Re-enter the position at the specified price level\n\n\n  enter(price) {\n    this.props.api.buy(msg => this.props.updatePositions(), this.props.symbol, this.state.lastQty, \"limit\", price, \"gtc\");\n  }\n\n  render() {\n    let change = (this.props.price - this.props.cost) / this.props.cost;\n    return /*#__PURE__*/_jsxDEV(\"fieldset\", {\n      className: \"portfolioElement\",\n      children: [/*#__PURE__*/_jsxDEV(\"legend\", {\n        children: [this.props.symbol, \" // $\", (Math.floor(this.props.price * 100) / 100).toFixed(2), \" // \", (change * 100).toFixed(2), \"%\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(PCTBar, {\n        symbol: this.props.symbol,\n        height: \"5\",\n        width: \"300\",\n        pctChange: change\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"shares\",\n          children: \"Shares:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          style: {\n            float: \"right\",\n            width: \"50px\",\n            textAlign: \"center\"\n          },\n          id: \"shares\",\n          value: this.props.qty\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.props.updatePositions,\n          children: \"Update\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 19\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => this.enter(10),\n          children: \"Enter\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 19\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => this.exit(10),\n          children: \"Exit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 19\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 15\n      }, this)]\n    }, this.props.symbol, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default PositionBox;","map":{"version":3,"sources":["/home/ruitai/alpaca/frontend/src/Components/positionBox.js"],"names":["Component","PCTBar","PositionBox","constructor","props","enter","bind","exit","state","lastQty","orderCallback","msg","console","log","updatePositions","price","api","sell","symbol","qty","setState","buy","render","change","cost","Math","floor","toFixed","float","width","textAlign"],"mappings":"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","sourcesContent":["import {Component} from \"react\";\nimport PCTBar from '../Components/pctBar';\n\nclass PositionBox extends Component{\n    constructor(props){\n        super(props);\n        //symbol\n        //qty\n        //cost (purchase cost)\n        //price (current price)\n        //api (alpaca trade api)\n        //updatePositions()\n\n        //Functions that need to get bound to this instance\n        this.enter = this.enter.bind(this);\n        this.exit = this.exit.bind(this);\n\n\n        this.state = {\n            lastQty: null, //Stores the previous sell quantity so you can re-buy the same amount\n        }\n    }\n\n    orderCallback(msg){\n        console.log(msg)\n        this.props.updatePositions()\n    }\n\n    //Exit the position at the specified price level\n    exit(price){\n        //Do We really need the callback here?\n        this.props.api.sell((msg)=>this.props.updatePositions(), this.props.symbol, this.props.qty, \"limit\", price, \"gtc\")\n        this.setState({lastQty: this.props.qty})\n    }\n\n    //Re-enter the position at the specified price level\n    enter(price){\n        this.props.api.buy((msg)=>this.props.updatePositions(), this.props.symbol, this.state.lastQty, \"limit\", price, \"gtc\")\n    }\n\n    render(){\n        let change = (this.props.price - this.props.cost) / this.props.cost\n\n        return(\n            <fieldset className=\"portfolioElement\" key={this.props.symbol}>\n              <legend>{this.props.symbol} // ${(Math.floor(this.props.price*100)/100).toFixed(2)} // {(change*100).toFixed(2)}%</legend>\n              <PCTBar symbol={this.props.symbol} height=\"5\" width=\"300\" pctChange={change} />\n\n              <div>\n              <label htmlFor=\"shares\">Shares:</label>\n              <input style={{float:\"right\", width:\"50px\", textAlign:\"center\"}} id=\"shares\" value={this.props.qty}/>\n              </div>\n\n              <div>\n                  <button onClick={this.props.updatePositions}>Update</button>\n              </div>\n\n\n              {/*These will need conditional rendering depending on whether we're already in the position or not*/}\n              <div>\n                  <button onClick={()=>this.enter(10)}>Enter</button>\n              </div>\n\n              <div>\n                  <button onClick={()=>this.exit(10)}>Exit</button>\n              </div>\n              \n            </fieldset>\n        )\n        \n    }\n}\n\nexport default PositionBox;"]},"metadata":{},"sourceType":"module"}